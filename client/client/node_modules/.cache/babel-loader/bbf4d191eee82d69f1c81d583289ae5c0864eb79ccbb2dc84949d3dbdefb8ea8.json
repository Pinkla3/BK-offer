{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\klaud\\\\Documents\\\\Sortowanie\\\\client\\\\src\\\\EditOffersModal.js.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport Modal from \"react-modal\";\nimport axios from \"axios\";\n\n// Ustawienie elementu aplikacji dla modala (upewnij się, że masz element #root w index.html)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nModal.setAppElement(\"#root\");\nconst EditOffersModal = ({\n  isOpen,\n  onRequestClose,\n  availability\n}) => {\n  _s();\n  const [offers, setOffers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Pobieramy oferty z API oraz filtrujemy je po dostępności\n  useEffect(() => {\n    const fetchOffers = async () => {\n      setLoading(true);\n      try {\n        // Pobieramy wszystkie oferty; przyjmujemy, że pageSize=100 wystarczy, aby zebrać wszystkie oferty\n        const response = await axios.get(\"https://api-lockstep.berlin-opiekunki.pl/v1/offer/all\", {\n          params: {\n            page: 1,\n            pageSize: 100\n          }\n        });\n        console.log(\"EditOffersModal - API response:\", response.data);\n        const {\n          meta,\n          offers: fetchedOffers\n        } = response.data;\n        // Opcjonalnie przycinamy do meta.all (jeśli API zwraca więcej niż oczekujemy)\n        const totalOffersCount = meta.all;\n        const allOffers = fetchedOffers.slice(0, totalOffersCount);\n\n        // Filtrujemy oferty, aby wyświetlić tylko te, które mają dyspozycyjność równą podanej availability\n        // Przyjmujemy, że pole oferty to \"dyspozycyjnosc\" w formacie \"YYYY-MM\"\n        const filteredOffers = allOffers.filter(offer => {\n          return offer.dyspozycyjnosc === availability;\n        });\n        setOffers(filteredOffers);\n      } catch (err) {\n        console.error(\"EditOffersModal - Błąd pobierania ofert:\", err);\n        setError(\"Błąd pobierania ofert\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (isOpen) {\n      fetchOffers();\n    }\n  }, [isOpen, availability]);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onRequestClose: onRequestClose,\n    contentLabel: \"Oferty pracy wed\\u0142ug dyspozycyjno\\u015Bci\",\n    style: {\n      content: {\n        maxWidth: \"600px\",\n        margin: \"auto\",\n        padding: \"30px\",\n        borderRadius: \"12px\",\n        boxShadow: \"0 4px 12px rgba(0,0,0,0.1)\",\n        background: \"#fff\"\n      }\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        textAlign: \"center\",\n        marginBottom: \"20px\"\n      },\n      children: [\"Oferty pracy - dost\\u0119pno\\u015B\\u0107: \", availability]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0141adowanie ofert...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this), !loading && !error && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: offers.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          listStyle: \"none\",\n          padding: 0\n        },\n        children: offers.map((offer, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            marginBottom: \"10px\",\n            borderBottom: \"1px solid #eee\",\n            paddingBottom: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: offer.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 19\n          }, this), \" \\u2013 \", offer.title, \" \\u2013 \", offer.city, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: [\"Data rozpocz\\u0119cia: \", offer.startDate ? new Date(offer.startDate).toLocaleDateString() : \"Brak daty\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 19\n          }, this)]\n        }, offer.id || index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Brak ofert pracy dla wybranej dyspozycyjno\\u015Bci.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\",\n        marginTop: \"20px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onRequestClose,\n        style: {\n          padding: \"10px 20px\",\n          backgroundColor: \"#007bff\",\n          color: \"#fff\",\n          border: \"none\",\n          borderRadius: \"6px\",\n          cursor: \"pointer\"\n        },\n        children: \"Zamknij\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(EditOffersModal, \"Ci0Gjzm2IMb8tlOKnQTgF981EiU=\");\n_c = EditOffersModal;\nexport default EditOffersModal;\nvar _c;\n$RefreshReg$(_c, \"EditOffersModal\");","map":{"version":3,"names":["React","useEffect","useState","Modal","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","setAppElement","EditOffersModal","isOpen","onRequestClose","availability","_s","offers","setOffers","loading","setLoading","error","setError","fetchOffers","response","get","params","page","pageSize","console","log","data","meta","fetchedOffers","totalOffersCount","all","allOffers","slice","filteredOffers","filter","offer","dyspozycyjnosc","err","contentLabel","style","content","maxWidth","margin","padding","borderRadius","boxShadow","background","children","textAlign","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","length","listStyle","map","index","borderBottom","paddingBottom","name","title","city","startDate","Date","toLocaleDateString","id","marginTop","onClick","backgroundColor","color","border","cursor","_c","$RefreshReg$"],"sources":["C:/Users/klaud/Documents/Sortowanie/client/src/EditOffersModal.js.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Modal from \"react-modal\";\r\nimport axios from \"axios\";\r\n\r\n// Ustawienie elementu aplikacji dla modala (upewnij się, że masz element #root w index.html)\r\nModal.setAppElement(\"#root\");\r\n\r\nconst EditOffersModal = ({ isOpen, onRequestClose, availability }) => {\r\n  const [offers, setOffers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Pobieramy oferty z API oraz filtrujemy je po dostępności\r\n  useEffect(() => {\r\n    const fetchOffers = async () => {\r\n      setLoading(true);\r\n      try {\r\n        // Pobieramy wszystkie oferty; przyjmujemy, że pageSize=100 wystarczy, aby zebrać wszystkie oferty\r\n        const response = await axios.get(\"https://api-lockstep.berlin-opiekunki.pl/v1/offer/all\", {\r\n          params: { page: 1, pageSize: 100 },\r\n        });\r\n        console.log(\"EditOffersModal - API response:\", response.data);\r\n        const { meta, offers: fetchedOffers } = response.data;\r\n        // Opcjonalnie przycinamy do meta.all (jeśli API zwraca więcej niż oczekujemy)\r\n        const totalOffersCount = meta.all;\r\n        const allOffers = fetchedOffers.slice(0, totalOffersCount);\r\n\r\n        // Filtrujemy oferty, aby wyświetlić tylko te, które mają dyspozycyjność równą podanej availability\r\n        // Przyjmujemy, że pole oferty to \"dyspozycyjnosc\" w formacie \"YYYY-MM\"\r\n        const filteredOffers = allOffers.filter((offer) => {\r\n          return offer.dyspozycyjnosc === availability;\r\n        });\r\n\r\n        setOffers(filteredOffers);\r\n      } catch (err) {\r\n        console.error(\"EditOffersModal - Błąd pobierania ofert:\", err);\r\n        setError(\"Błąd pobierania ofert\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      fetchOffers();\r\n    }\r\n  }, [isOpen, availability]);\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      contentLabel=\"Oferty pracy według dyspozycyjności\"\r\n      style={{\r\n        content: {\r\n          maxWidth: \"600px\",\r\n          margin: \"auto\",\r\n          padding: \"30px\",\r\n          borderRadius: \"12px\",\r\n          boxShadow: \"0 4px 12px rgba(0,0,0,0.1)\",\r\n          background: \"#fff\",\r\n        },\r\n      }}\r\n    >\r\n      <h2 style={{ textAlign: \"center\", marginBottom: \"20px\" }}>\r\n        Oferty pracy - dostępność: {availability}\r\n      </h2>\r\n      {loading && <div>Ładowanie ofert...</div>}\r\n      {error && <div>{error}</div>}\r\n      {!loading && !error && (\r\n        <>\r\n          {offers.length > 0 ? (\r\n            <ul style={{ listStyle: \"none\", padding: 0 }}>\r\n              {offers.map((offer, index) => (\r\n                <li key={offer.id || index} style={{ marginBottom: \"10px\", borderBottom: \"1px solid #eee\", paddingBottom: \"10px\" }}>\r\n                  <strong>{offer.name}</strong> – {offer.title} – {offer.city}\r\n                  <br />\r\n                  <small>Data rozpoczęcia: {offer.startDate ? new Date(offer.startDate).toLocaleDateString() : \"Brak daty\"}</small>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          ) : (\r\n            <div>Brak ofert pracy dla wybranej dyspozycyjności.</div>\r\n          )}\r\n        </>\r\n      )}\r\n      <div style={{ textAlign: \"center\", marginTop: \"20px\" }}>\r\n        <button\r\n          onClick={onRequestClose}\r\n          style={{\r\n            padding: \"10px 20px\",\r\n            backgroundColor: \"#007bff\",\r\n            color: \"#fff\",\r\n            border: \"none\",\r\n            borderRadius: \"6px\",\r\n            cursor: \"pointer\",\r\n          }}\r\n        >\r\n          Zamknij\r\n        </button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default EditOffersModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}