{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\klaud\\\\Documents\\\\Sortowanie\\\\client\\\\src\\\\Register.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Register() {\n  _s();\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    password: '',\n    role: 'user'\n  });\n  const [errors, setErrors] = useState({});\n  const navigate = useNavigate();\n  const handleChange = (field, value) => {\n    setForm({\n      ...form,\n      [field]: value\n    });\n    let error = '';\n    if (field === 'name' && !value.trim()) error = 'Imię jest wymagane';\n    if (field === 'email' && !value.includes('@')) error = 'Nieprawidłowy email';\n    if (field === 'password' && value.length < 6) error = 'Hasło musi mieć min. 6 znaków';\n    setErrors(prev => ({\n      ...prev,\n      [field]: error\n    }));\n  };\n  useEffect(() => {\n    const delay = setTimeout(() => {\n      if (form.email.includes('@')) {\n        axios.get(`http://localhost:3001/check-email?email=${form.email}`).then(res => {\n          if (res.data.exists) {\n            setErrors(prev => ({\n              ...prev,\n              email: 'Email już istnieje'\n            }));\n          }\n        });\n      }\n    }, 500);\n    return () => clearTimeout(delay);\n  }, [form.email]);\n  const validateForm = () => {\n    const newErrors = {};\n    if (!form.name.trim()) newErrors.name = 'Imię jest wymagane';\n    if (!form.email.includes('@')) newErrors.email = 'Nieprawidłowy email';\n    if (form.password.length < 6) newErrors.password = 'Hasło musi mieć min. 6 znaków';\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    try {\n      await axios.post('http://localhost:3001/register', form);\n      toast.success('Zarejestrowano! Możesz się zalogować');\n      navigate('/login');\n    } catch {\n      toast.error('Błąd rejestracji');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Rejestracja\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Imi\\u0119\",\n        value: form.name,\n        onChange: e => handleChange('name', e.target.value),\n        style: {\n          borderColor: errors.name ? 'red' : '#ccc'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), errors.name && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red',\n          fontSize: 12\n        },\n        children: errors.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Email\",\n        value: form.email,\n        onChange: e => handleChange('email', e.target.value),\n        style: {\n          borderColor: errors.email ? 'red' : '#ccc'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), errors.email && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red',\n          fontSize: 12\n        },\n        children: errors.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Has\\u0142o\",\n        value: form.password,\n        onChange: e => handleChange('password', e.target.value),\n        style: {\n          borderColor: errors.password ? 'red' : '#ccc'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), errors.password && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red',\n          fontSize: 12\n        },\n        children: errors.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: form.role,\n        onChange: e => setForm({\n          ...form,\n          role: e.target.value\n        }),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"user\",\n          children: \"U\\u017Cytkownik\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"admin\",\n          children: \"Administrator\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Zarejestruj\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: 10\n      },\n      children: [\"Masz ju\\u017C konto? \", /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: 'blue',\n          cursor: 'pointer'\n        },\n        onClick: () => navigate('/login'),\n        children: \"Zaloguj si\\u0119\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(Register, \"s5if5FHU/RIlQauMM+t5fzjkj8k=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["useState","useEffect","axios","toast","useNavigate","jsxDEV","_jsxDEV","Register","_s","form","setForm","name","email","password","role","errors","setErrors","navigate","handleChange","field","value","error","trim","includes","length","prev","delay","setTimeout","get","then","res","data","exists","clearTimeout","validateForm","newErrors","Object","keys","handleSubmit","e","preventDefault","post","success","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","onChange","target","borderColor","color","fontSize","type","marginTop","cursor","onClick","_c","$RefreshReg$"],"sources":["C:/Users/klaud/Documents/Sortowanie/client/src/Register.js"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { useNavigate } from 'react-router-dom';\n\nfunction Register() {\n  const [form, setForm] = useState({ name: '', email: '', password: '', role: 'user' });\n  const [errors, setErrors] = useState({});\n  const navigate = useNavigate();\n\n  const handleChange = (field, value) => {\n    setForm({ ...form, [field]: value });\n\n    let error = '';\n    if (field === 'name' && !value.trim()) error = 'Imię jest wymagane';\n    if (field === 'email' && !value.includes('@')) error = 'Nieprawidłowy email';\n    if (field === 'password' && value.length < 6) error = 'Hasło musi mieć min. 6 znaków';\n    setErrors(prev => ({ ...prev, [field]: error }));\n  };\n\n  useEffect(() => {\n    const delay = setTimeout(() => {\n      if (form.email.includes('@')) {\n        axios.get(`http://localhost:3001/check-email?email=${form.email}`)\n          .then(res => {\n            if (res.data.exists) {\n              setErrors(prev => ({ ...prev, email: 'Email już istnieje' }));\n            }\n          });\n      }\n    }, 500);\n    return () => clearTimeout(delay);\n  }, [form.email]);\n\n  const validateForm = () => {\n    const newErrors = {};\n    if (!form.name.trim()) newErrors.name = 'Imię jest wymagane';\n    if (!form.email.includes('@')) newErrors.email = 'Nieprawidłowy email';\n    if (form.password.length < 6) newErrors.password = 'Hasło musi mieć min. 6 znaków';\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    try {\n      await axios.post('http://localhost:3001/register', form);\n      toast.success('Zarejestrowano! Możesz się zalogować');\n      navigate('/login');\n    } catch {\n      toast.error('Błąd rejestracji');\n    }\n  };\n\n  return (\n    <div style={{ padding: 20 }}>\n      <h2>Rejestracja</h2>\n      <form onSubmit={handleSubmit}>\n        <input placeholder=\"Imię\" value={form.name} onChange={e => handleChange('name', e.target.value)}\n               style={{ borderColor: errors.name ? 'red' : '#ccc' }} />\n        {errors.name && <div style={{ color: 'red', fontSize: 12 }}>{errors.name}</div>}\n\n        <input placeholder=\"Email\" value={form.email} onChange={e => handleChange('email', e.target.value)}\n               style={{ borderColor: errors.email ? 'red' : '#ccc' }} />\n        {errors.email && <div style={{ color: 'red', fontSize: 12 }}>{errors.email}</div>}\n\n        <input type=\"password\" placeholder=\"Hasło\" value={form.password}\n               onChange={e => handleChange('password', e.target.value)}\n               style={{ borderColor: errors.password ? 'red' : '#ccc' }} />\n        {errors.password && <div style={{ color: 'red', fontSize: 12 }}>{errors.password}</div>}\n\n        <select value={form.role} onChange={e => setForm({ ...form, role: e.target.value })}>\n          <option value=\"user\">Użytkownik</option>\n          <option value=\"admin\">Administrator</option>\n        </select>\n        <button type=\"submit\">Zarejestruj</button>\n      </form>\n\n      <p style={{ marginTop: 10 }}>\n        Masz już konto? <span style={{ color: 'blue', cursor: 'pointer' }} onClick={() => navigate('/login')}>Zaloguj się</span>\n      </p>\n    </div>\n  );\n}\nexport default Register;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}